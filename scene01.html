<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Museu Espacial VR</title>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script
        src="https://unpkg.com/aframe-particle-system-component@1.1.5/dist/aframe-particle-system-component.min.js"></script>
    <script src="sceneManager.js"></script>
    <script
        src="https://cdn.jsdelivr.net/gh/c-frame/aframe-particle-system-component@1.2.0/dist/aframe-particle-system-component.min.js"></script>

    <script src="https://cdn.rawgit.com/mrturck/aframe-joystick/master/joystick.min.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            transition: opacity 0.8s ease-in-out;
            opacity: 0;
            background-color: black;
        }

        /* Joystick Limpo e Moderno - APENAS MOBILE */
        #np {
            display: none !important;
            /* Escondido por padr√£o */
            position: fixed !important;
            width: 140px !important;
            height: 140px !important;
            left: 30px !important;
            bottom: 30px !important;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05)) !important;
            border: 3px solid rgba(255, 255, 255, 0.4) !important;
            border-radius: 50% !important;
            z-index: 20 !important;
            touch-action: none !important;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5),
                inset 0 0 20px rgba(255, 255, 255, 0.1) !important;
            backdrop-filter: blur(5px) !important;
        }

        /* Mostra APENAS em dispositivos m√≥veis/touch */
        @media (hover: none) and (pointer: coarse) {
            #np {
                display: block !important;
            }
        }

        /* Tamb√©m mostra em telas pequenas */
        @media (max-width: 768px) {
            #np {
                display: block !important;
            }
        }

        #np p {
            display: none !important;
        }

        /* Cruz direcional */
        #np::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60%;
            height: 2px;
            background: rgba(255, 255, 255, 0.2);
            z-index: 1;
        }

        #np::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 2px;
            height: 60%;
            background: rgba(255, 255, 255, 0.2);
            z-index: 1;
        }

        /* Estiliza todos os elementos do NippleJS */
        #np>div,
        [id^="nipple_0_"] {
            background: linear-gradient(145deg, #ffffff, #e0e0e0) !important;
            border: 2px solid rgba(255, 255, 255, 0.8) !important;
            border-radius: 50% !important;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3),
                inset 0 -2px 5px rgba(0, 0, 0, 0.2),
                inset 0 2px 5px rgba(255, 255, 255, 0.5) !important;
            z-index: 2 !important;
        }

        @media (max-width: 480px) {
            #np {
                width: 120px !important;
                height: 120px !important;
                left: 20px !important;
                bottom: 20px !important;
            }
        }
    </style>
    <link rel="stylesheet" href="screenloader.css">
    <script>
        // Carrega configura√ß√µes dos modelos
        let modelsConfig = {};
        fetch('modelsConfig.json')
            .then(r => r.json())
            .then(config => {
                modelsConfig = config;
                applyModelConfigs();
            })
            .catch(err => console.error('Erro ao carregar modelsConfig.json:', err));

        function applyModelConfigs() {
            const scene = 'scene01';
            const models = ['hubble', 'jwst', 'saturnv', 'iss', 'voyager'];

            models.forEach(modelName => {
                const entity = document.getElementById(`${modelName}-model-entity`);
                if (entity && modelsConfig[modelName] && modelsConfig[modelName][scene]) {
                    const cfg = modelsConfig[modelName][scene];
                    entity.setAttribute('position', cfg.position);
                    entity.setAttribute('scale', cfg.scale);
                    entity.setAttribute('rotation', cfg.rotation);
                }
            });
        }

        // FUN√á√ÉO PARA FECHAR PAIN√âIS: Limpa os containers e mostra os √≠cones de volta
        function hideAllInfoPanels() {
            const containers = document.querySelectorAll("[id^=infoPanelContainer]");
            containers.forEach((container) => {
                container.innerHTML = ""; // Remove o conte√∫do do template
                const hotspotIcon = container.previousElementSibling;
                if (hotspotIcon) hotspotIcon.setAttribute("visible", true); // Mostra o bot√£o azul
            });
        }
    </script>
</head>

<body>
    <div id="custom-loader">
        <div class="stars"></div>

        <div class="orbit-container">
            <div class="orbit orbit-1"></div>
            <div class="orbit orbit-2"></div>
            <div class="orbit orbit-3"></div>
            <div class="planet"></div>
            <div class="satellite"></div>
        </div>

        <div class="loader-text">CARREGANDO</div>

        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
        <div class="progress-text" id="progress-text">0%</div>
    </div>
    <a-scene id="scene01" joystick>

        <a-assets>
            <img id="skyTexture" src="/images/ceu-noturno-estrelado-azul-e-branco.jpg">
            <a-asset-item id="hubble-model" src="/models/hubble.glb"></a-asset-item>
            <a-asset-item id="jwst-model" src="/models/jwst_james_webb_space_telescope.glb"></a-asset-item>
            <a-asset-item id="saturnv-model" src="/models/saturnV.glb"></a-asset-item>
            <a-asset-item id="iss-model" src="/models/ISS_Correct.glb"></a-asset-item>
            <a-asset-item id="voyager-model" src="/models/Voyager 1.glb"></a-asset-item>
            <img id="hotspot-img" src="images/HotspotIcon.png">
            <img id="crossIcon" src="https://img.icons8.com/?size=100&id=43925&format=png&color=FFFFFF" alt="Fechar">
            <img id="backTexture" src="assets/Panoramas/home.png" alt="Tela inicial">
            <!-- TEMPLATE 1: HUBBLE -->

            <template id="infoPanel1">
                <a-entity rotation="0 45 0">
                    <a-plane color="#1a1a1a" height="1.5" width="2.5" position="1.79222 1.2 -0.0711"
                        rotation="0 -16.71 0" material="side: double">
                        <a-text
                            value="TELESCOPIO HUBBLE\n\nLancado em 1990, ele revolucionou a astronomia ao capturar imagens sem a distorcao da atmosfera terrestre."
                            align="center" width="2.2" position="0 0.2 0.01" text=""></a-text>
                        <a-image id="close-btn" src="#crossIcon" class="clickable" position="1.1 0.6 0.001" width="0.25"
                            cursor-hover height="0.25" material="" geometry=""></a-image>
                        <a-box id="view-hubble-btn" position="0 -0.5 0.05" width="1.8" height="0.3" depth="0.05"
                            class="clickable" color="#ff6600" material="emissive: #ff6600; emissiveIntensity: 0.5;"
                            cursor-hover>
                            <a-text value="Ir para sala" position="0 0 0.040" align="center" anchor="center"
                                color="#ffffff" font-size="16" cursor-hover></a-text>
                        </a-box>

                    </a-plane>
                </a-entity>
            </template>
            <!-- #endregion -->
            <!-- TEMPLATE 2: VOYAGER -->
            <template id="infoPanel2">
                <a-entity>
                    <a-plane color="#1a1a1a" height="1.5" width="2.5" position="0 1.2 0" material="opacity: 1">
                        <a-text
                            value="SONDA VOYAGER 1\n\nO objeto humano mais distante da Terra. Atualmente viaja pelo espaco interestelar."
                            align="center" width="2.2" position="0 0.2 0.01"></a-text>
                        <a-image id="close-btn" src="#crossIcon" class="clickable" position="1.1 0.6 0.001" width="0.25"
                            cursor-hover height="0.25"></a-image>
                        <a-box id="view-voyager-btn" position="0 -0.5 0.05" width="1.8" height="0.3" depth="0.05"
                            class="clickable" color="#ff6600" material="emissive: #ff6600; emissiveIntensity: 0.5;"
                            cursor-hover>
                            <a-text value="Ir para sala" position="0 0 0.040" align="center" anchor="center"
                                cursor-hover color="#ffffff" font-size="16"></a-text>
                        </a-box>
                    </a-plane>
                </a-entity>
            </template>

            <!-- TEMPLATE 3: JWST -->
            <template id="infoPanel3">
                <a-entity>
                    <a-plane color="#1a1a1a" height="1.5" width="2.5" position="0 1.2 0" material="opacity: 1">
                        <a-text
                            value="TELESCOPIO JAMES WEBB\n\nO sucessor do Hubble, lancado em 2021. Observa o universo em infravermelho, revelando as primeiras galaxias."
                            align="center" width="2.2" position="0 0.2 0.01"></a-text>
                        <a-image id="close-btn" src="#crossIcon" class="clickable" position="1.1 0.6 0.001" width="0.25"
                            cursor-hover height="0.25"></a-image>
                        <a-box id="view-jwst-btn" position="0 -0.5 0.05" width="1.8" height="0.3" depth="0.05"
                            class="clickable" color="#ff6600" material="emissive: #ff6600; emissiveIntensity: 0.5;"
                            cursor-hover>
                            <a-text value="Ir para sala" position="0 0 0.040" align="center" anchor="center"
                                color="#ffffff" font-size="16" cursor-hover></a-text>
                        </a-box>
                    </a-plane>
                </a-entity>
            </template>
            <!-- #endregion -->
            <!-- TEMPLATE 4: SATURN V -->
            <template id="infoPanel4">
                <a-entity rotation="0 -45 0">
                    <a-plane color="#1a1a1a" height="1.5" width="2.5" rotation="0 -16.71 0" material="side: double">
                        <a-text
                            value="FOGUETE SATURN V\n\nO foguete mais poderoso ja construido. Levou os astronautas da Apollo a Lua entre 1969 e 1972."
                            align="center" width="2.2" position="0 0.2 0.01"></a-text>
                        <a-image id="close-btn" src="#crossIcon" class="clickable" position="1.1 0.6 0.001" width="0.25"
                            cursor-hover height="0.25"></a-image>
                        <a-box id="view-saturnv-btn" position="0 -0.5 0.05" width="1.8" height="0.3" depth="0.05"
                            class="clickable" color="#ff6600" material="emissive: #ff6600; emissiveIntensity: 0.5;"
                            cursor-hover>
                            <a-text value="Ir para sala" position="0 0 0.040" align="center" anchor="center"
                                cursor-hover color="#ffffff" font-size="16"></a-text>
                        </a-box>
                    </a-plane>
                </a-entity>
            </template>

            <!-- TEMPLATE 5: ISS -->
            <template id="infoPanel5">
                <a-entity>
                    <a-plane color="#1a1a1a" height="1.5" width="2.5" position="0 1.2 0" material="opacity: 1">
                        <a-text
                            value="ESTACAO ESPACIAL INTERNACIONAL\n\nUm laboratorio orbital habitado continuamente desde 2000. Simbolo da cooperacao internacional."
                            align="center" width="2.2" position="0 0.2 0.01"></a-text>
                        <a-image id="close-btn" src="#crossIcon" class="clickable" position="1.1 0.6 0.001" width="0.25"
                            cursor-hover height="0.25"></a-image>
                        <a-box id="view-iss-btn" position="0 -0.5 0.05" width="1.8" height="0.3" depth="0.05"
                            class="clickable" color="#ff6600" material="emissive: #ff6600; emissiveIntensity: 0.5;"
                            cursor-hover>
                            <a-text value="Ir para sala" position="0 0 0.040" align="center" anchor="center"
                                cursor-hover color="#ffffff" font-size="16"></a-text>
                        </a-box>
                    </a-plane>
                </a-entity>
            </template>
        </a-assets>


        <a-sky id="sky-main" src="#skyTexture"
            animation="property: rotation; to: 0 360 0; loop: true; dur: 365000; easing: linear"></a-sky>



        <a-camera id="camera" wall-collision position="0 1.6 0" cursor="rayOrigin: mouse"
            raycaster="objects: .clickable; far: 20" look-controls="reverseMouseDrag: false"
            wasd-controls="enabled: true" mobile-look-controls>

            <a-cursor color="#ffffff" fuse="false" fuse-timeout="2000"
                animation__fusing="property: scale; startEvents: fusing; easing: easeInCubic; dur: 2000; from: 1 1 1; to: 0.1 0.1 0.1"
                animation__mouseleave="property: scale; startEvents: mouseleave; easing: easeInCubic; dur: 200; to: 1 1 1"></a-cursor>

        </a-camera>




        <!-- Ilumina√ß√£o Geral -->
        <a-light id="ambient-light" type="ambient" color="#ffe8cc" intensity="0.3"></a-light>
        <a-light id="directional-light" type="directional" color="#fff" intensity="0.4" position="5 10 5"
            castShadow></a-light>

        <!-- Spotlights nos Modelos -->
        <a-light type="spot" intensity="0.7" position="-5 4 -5" target="#hubble-model-entity" angle="25" penumbra="0.3"
            color="#ffffff" castShadow></a-light>
        <a-light type="spot" intensity="0.7" position="0 4 -5" target="#jwst-model-entity" angle="25" penumbra="0.3"
            color="#ffffff" castShadow></a-light>
        <a-light type="spot" intensity="0.7" position="5 4 -5" target="#saturnv-model-entity" angle="25" penumbra="0.3"
            color="#ffffff" castShadow></a-light>
        <a-light type="spot" intensity="0.7" position="-5 4 0" target="#iss-model-entity" angle="25" penumbra="0.3"
            color="#ffffff" castShadow></a-light>
        <a-light type="spot" intensity="0.7" position="5 4 0" target="#voyager-model-entity" angle="25" penumbra="0.3"
            color="#ffffff" castShadow></a-light>

        <!-- Luzes de destaque -->
        <a-light id="point-light-1" type="point" intensity="0.2" position="-5 2.5 -5" color="#ffd4a3"></a-light>
        <a-light id="point-light-2" type="point" intensity="0.2" position="5 2.5 -5" color="#ffd4a3"></a-light>
        <a-light id="point-light-3" type="point" intensity="0.2" position="0 2.5 0" color="#ffd4a3"></a-light>
        <a-light id="point-light-4" type="point" intensity="0.2" position="-5 2.5 0" color="#ffd4a3"></a-light>
        <a-light id="point-light-5" type="point" intensity="0.2" position="5 2.5 0" color="#ffd4a3"></a-light>

        <!-- Ambiente -->
        <a-plane id="floor-main" rotation="-90 0 0" width="50" height="50" color="#8b6f47" roughness="0.6"
            metalness="0.1" shadow></a-plane>
        <!-- Detalhes do ch√£o -->
        <a-plane id="floor-detail" rotation="-90 0 0" width="18" height="18" position="0 0.01 -1" color="#a0826d"
            roughness="0.5"></a-plane>

        <!-- Teto com claraboia central -->
        <a-entity id="ceiling-structure">
            <!-- Teto frontal -->
            <a-box id="ceiling-front" position="0 5 -7" width="20" height="0.2" depth="6" color="#f5f5dc"
                roughness="0.7" material="emissive: #e8dcc7; emissiveIntensity: 0.1"></a-box>
            <!-- Teto traseiro -->
            <a-box id="ceiling-back" position="0 5 5" width="20" height="0.2" depth="8" color="#f5f5dc" roughness="0.7"
                material="emissive: #e8dcc7; emissiveIntensity: 0.1"></a-box>
            <!-- Teto esquerdo -->
            <a-box id="ceiling-left" position="-7 5 -1" width="6" height="0.2" depth="8" color="#f5f5dc" roughness="0.7"
                material="emissive: #e8dcc7; emissiveIntensity: 0.1"></a-box>
            <!-- Teto direito -->
            <a-box id="ceiling-right" position="7 5 -1" width="6" height="0.2" depth="8" color="#f5f5dc" roughness="0.7"
                material="emissive: #e8dcc7; emissiveIntensity: 0.1"></a-box>

            <!-- Molduras da claraboia -->
            <a-box id="skylight-frame-front" position="0 4.9 -4.2" width="14.5" height="0.15" depth="0.25"
                color="#8b7355" material="metalness: 0.3; emissive: #6d5d4b; emissiveIntensity: 0.3"></a-box>
            <a-box id="skylight-frame-back" position="0 4.9 2.2" width="14.5" height="0.15" depth="0.25" color="#8b7355"
                material="metalness: 0.3; emissive: #6d5d4b; emissiveIntensity: 0.3"></a-box>
            <a-box id="skylight-frame-left" position="-7 4.9 -1" width="0.25" height="0.15" depth="6.5" color="#8b7355"
                material="metalness: 0.3; emissive: #6d5d4b; emissiveIntensity: 0.3"></a-box>
            <a-box id="skylight-frame-right" position="7 4.9 -1" width="0.25" height="0.15" depth="6.5" color="#8b7355"
                material="metalness: 0.3; emissive: #6d5d4b; emissiveIntensity: 0.3"></a-box>

            <!-- Grades decorativas da claraboia -->
            <!-- Vigas horizontais -->
            <a-box id="skylight-grid-h1" position="0 4.92 -2.5" width="14" height="0.12" depth="0.12" color="#6d5d4b"
                material="metalness: 0.5; roughness: 0.3"></a-box>
            <a-box id="skylight-grid-h2" position="0 4.92 -1" width="14" height="0.12" depth="0.12" color="#6d5d4b"
                material="metalness: 0.5; roughness: 0.3"></a-box>
            <a-box id="skylight-grid-h3" position="0 4.92 0.5" width="14" height="0.12" depth="0.12" color="#6d5d4b"
                material="metalness: 0.5; roughness: 0.3"></a-box>

            <!-- Vigas transversais -->
            <a-box id="skylight-grid-v1" position="-4.5 4.92 -1" width="0.12" height="0.12" depth="6" color="#6d5d4b"
                material="metalness: 0.5; roughness: 0.3"></a-box>
            <a-box id="skylight-grid-v2" position="-1.5 4.92 -1" width="0.12" height="0.12" depth="6" color="#6d5d4b"
                material="metalness: 0.5; roughness: 0.3"></a-box>
            <a-box id="skylight-grid-v3" position="1.5 4.92 -1" width="0.12" height="0.12" depth="6" color="#6d5d4b"
                material="metalness: 0.5; roughness: 0.3"></a-box>
            <a-box id="skylight-grid-v4" position="4.5 4.92 -1" width="0.12" height="0.12" depth="6" color="#6d5d4b"
                material="metalness: 0.5; roughness: 0.3"></a-box>
        </a-entity>

        <!-- Molduras decorativas nas paredes superiores -->
        <a-box id="ceiling-molding-front" position="0 4.9 -9.85" width="20" height="0.15" depth="0.2" color="#8b7355"
            material="metalness: 0.3; emissive: #6d5d4b; emissiveIntensity: 0.2"></a-box>
        <a-box id="ceiling-back" position="0 5 6" width="20" height="0.2" depth="6" color="#f5f5dc" roughness="0.7"
            material="emissive: #e8dcc7; emissiveIntensity: 0.1" geometry="depth: 7.31"></a-box>
        <a-box id="ceiling-molding-left" position="-9.85 4.9 0" width="0.2" height="0.15" depth="20" color="#8b7355"
            material="metalness: 0.3; emissive: #6d5d4b; emissiveIntensity: 0.2"></a-box>
        <a-box id="ceiling-molding-right" position="9.85 4.9 0" width="0.2" height="0.15" depth="20" color="#8b7355"
            material="metalness: 0.3; emissive: #6d5d4b; emissiveIntensity: 0.2"></a-box>

        <!-- Paredes -->
        <a-box id="wall-front" position="0 2.5 -10" width="20" height="5" depth="0.3" color="#e8dcc7" roughness="0.6"
            class="wall" shadow material="emissive: #4a3f35; emissiveIntensity: 0.1"></a-box>
        <!-- Moldura parede frontal -->
        <a-box id="frame-front-top" position="0 4.8 -9.85" width="20" height="0.2" depth="0.15" color="#8b7355"
            class="wall" material="metalness: 0.3; emissive: #6d5d4b; emissiveIntensity: 0.2"></a-box>
        <a-box id="frame-front-bottom" position="0 0.15 -9.85" width="20" height="0.3" depth="0.15" color="#6d5d4b"
            class="wall" material="metalness: 0.2"></a-box>
        <!-- Rodap√© frontal -->
        <a-box id="baseboard-front" position="0 0.05 -9.9" width="20" height="0.1" depth="0.2" color="#5a4a3a"
            class="wall"></a-box>

        <a-box id="wall-left" position="-10 2.5 0" width="0.3" height="5" depth="20" color="#e8dcc7" roughness="0.6"
            class="wall" shadow material="emissive: #4a3f35; emissiveIntensity: 0.1"></a-box>
        <!-- Moldura parede esquerda -->
        <a-box id="frame-left-top" position="-9.85 4.8 0" width="0.15" height="0.2" depth="20" color="#8b7355"
            class="wall" material="metalness: 0.3; emissive: #6d5d4b; emissiveIntensity: 0.2"></a-box>
        <a-box id="frame-left-bottom" position="-9.85 0.15 0" width="0.15" height="0.3" depth="20" color="#6d5d4b"
            class="wall" material="metalness: 0.2"></a-box>
        <!-- Rodap√© esquerdo -->
        <a-box id="baseboard-left" position="-9.9 0.05 0" width="0.2" height="0.1" depth="20" color="#5a4a3a"
            class="wall"></a-box>

        <a-box id="wall-right" position="10 2.5 0" width="0.3" height="5" depth="20" color="#e8dcc7" roughness="0.6"
            class="wall" shadow material="emissive: #4a3f35; emissiveIntensity: 0.1"></a-box>
        <!-- Moldura parede direita -->
        <a-box id="frame-right-top" position="9.85 4.8 0" width="0.15" height="0.2" depth="20" color="#8b7355"
            class="wall" material="metalness: 0.3; emissive: #6d5d4b; emissiveIntensity: 0.2"></a-box>
        <a-box id="frame-right-bottom" position="9.85 0.15 0" width="0.15" height="0.3" depth="20" color="#6d5d4b"
            class="wall" material="metalness: 0.2"></a-box>
        <!-- Rodap√© direito -->
        <a-box id="baseboard-right" position="9.9 0.05 0" width="0.2" height="0.1" depth="20" color="#5a4a3a"
            class="wall"></a-box>

        <!-- Parede Traseira -->
        <a-box id="wall-back" position="0 2.5 10" width="20" height="5" depth="0.3" color="#e8dcc7" roughness="0.6"
            class="wall" shadow material="emissive: #4a3f35; emissiveIntensity: 0.1"></a-box>
        <!-- Moldura parede traseira -->
        <a-box id="frame-back-top" position="0 4.8 9.85" width="20" height="0.2" depth="0.15" color="#8b7355"
            class="wall" material="metalness: 0.3; emissive: #6d5d4b; emissiveIntensity: 0.2"></a-box>
        <a-box id="frame-back-bottom" position="0 0.15 9.85" width="20" height="0.3" depth="0.15" color="#6d5d4b"
            class="wall" material="metalness: 0.2"></a-box>
        <!-- Rodap√© traseiro -->
        <a-box id="baseboard-back" position="0 0.05 9.9" width="20" height="0.1" depth="0.2" color="#5a4a3a"
            class="wall"></a-box>

        <!-- Colunas Decorativas -->
        <a-entity id="columns-container">
            <!-- Coluna frontal esquerda -->
            <a-cylinder position="-8 2.5 -9" radius="0.25" height="5" color="#c9b8a0"
                material="metalness: 0.3; roughness: 0.5; emissive: #8b7355; emissiveIntensity: 0.1"
                class="wall"></a-cylinder>
            <a-cylinder position="-8 4.9 -9" radius="0.35" height="0.3" color="#8b7355"
                material="metalness: 0.4; emissive: #6d5d4b; emissiveIntensity: 0.2" class="wall"></a-cylinder>
            <a-cylinder position="-8 0.2 -9" radius="0.35" height="0.4" color="#8b7355" material="metalness: 0.4"
                class="wall"></a-cylinder>

            <!-- Coluna frontal direita -->
            <a-cylinder position="8 2.5 -9" radius="0.25" height="5" color="#c9b8a0"
                material="metalness: 0.3; roughness: 0.5; emissive: #8b7355; emissiveIntensity: 0.1"
                class="wall"></a-cylinder>
            <a-cylinder position="8 4.9 -9" radius="0.35" height="0.3" color="#8b7355"
                material="metalness: 0.4; emissive: #6d5d4b; emissiveIntensity: 0.2" class="wall"></a-cylinder>
            <a-cylinder position="8 0.2 -9" radius="0.35" height="0.4" color="#8b7355" material="metalness: 0.4"
                class="wall"></a-cylinder>

            <!-- Coluna traseira esquerda -->
            <a-cylinder position="-8 2.5 8" radius="0.25" height="5" color="#c9b8a0"
                material="metalness: 0.3; roughness: 0.5; emissive: #8b7355; emissiveIntensity: 0.1"
                class="wall"></a-cylinder>
            <a-cylinder position="-8 4.9 8" radius="0.35" height="0.3" color="#8b7355"
                material="metalness: 0.4; emissive: #6d5d4b; emissiveIntensity: 0.2" class="wall"></a-cylinder>
            <a-cylinder position="-8 0.2 8" radius="0.35" height="0.4" color="#8b7355" material="metalness: 0.4"
                class="wall"></a-cylinder>

            <!-- Coluna traseira direita -->
            <a-cylinder position="8 2.5 8" radius="0.25" height="5" color="#c9b8a0"
                material="metalness: 0.3; roughness: 0.5; emissive: #8b7355; emissiveIntensity: 0.1"
                class="wall"></a-cylinder>
            <a-cylinder position="8 4.9 8" radius="0.35" height="0.3" color="#8b7355"
                material="metalness: 0.4; emissive: #6d5d4b; emissiveIntensity: 0.2" class="wall"></a-cylinder>
            <a-cylinder position="8 0.2 8" radius="0.35" height="0.4" color="#8b7355" material="metalness: 0.4"
                class="wall"></a-cylinder>
        </a-entity>

        <!-- Pinturas Decorativas -->
        <a-entity id="paintings-container">
            <!-- Quadro 1: ISS -->
            <a-box id="painting-frame-iss" position="-9.85 2.2 0" rotation="0 90 0" width="1.8" height="2.2" depth="0.1"
                color="#4a2c2a" roughness="0.4"></a-box>
            <a-box id="painting-iss" class=" painting" data-painting-pos="-7 0 -7" position="-9.79 2.2 0" width="1.5"
                rotation="0 90 0" height="1.9" depth="0.05" src="/images/iss.jpg" roughness="0.8"
                metalness="0.5"></a-box>

            <!-- Quadro 2: Hubble -->
            <a-box id="painting-frame-hubble" position="-5 2.2 -9.85" width="1.8" height="2.2" depth="0.1"
                color="#1a4d6d" roughness="0.4"></a-box>
            <a-box id="painting-hubble" class=" painting" data-painting-pos="-3.5 0 -7" position="-5 2.2 -9.79"
                width="1.5" height="1.9" depth="0.05" src="/images/hubble.jpg" roughness="0.8" metalness="0.5"></a-box>

            <!-- Quadro 3: JWST -->
            <a-box id="painting-frame-jwst" position="0 2.2 -9.85" width="1.8" height="2.2" depth="0.1" color="#8b5a00"
                roughness="0.4"></a-box>
            <a-box id="painting-jwst" class=" painting" data-painting-pos="0 0 -7" position="0 2.2 -9.79" width="1.5"
                height="1.9" depth="0.05" src="/images/jwst.jpg" roughness="0.8" metalness="0.5"></a-box>
            <!-- Quadro 4: saturnV -->
            <a-box id="painting-frame-saturnv" position="5 2.2 -9.85" width="1.8" height="2.2" depth="0.1"
                color="#1e5631" roughness="0.4"></a-box>
            <a-box id="painting-saturnv" class=" painting" data-painting-pos="3.5 0 -7" position="5 2.2 -9.79"
                width="1.5" height="1.9" depth="0.05" src="/images/saturnV.jpg" roughness="0.8" metalness="0.5"></a-box>

            <!-- Quadro 5: Voyager -->
            <a-box id="painting-frame-voyager" position="9.85 2.2 0" width="1.8" height="2.2" depth="0.1"
                color="#5b2c6f" rotation="0 90 0" roughness="0.4"></a-box>
            <a-box id="painting-voyager" class=" painting" data-painting-pos="7 0 -7" position="9.79  2.2 0" width="1.5"
                rotation="0 90 0" height="1.9" depth="0.05" src="/images/voyager.jpg" roughness="0.8"
                metalness="0.5"></a-box>
        </a-entity>

        <!-- Exibi√ß√µes  -->
        <a-entity id="exhibits-container">
            <!-- Hubble -->
            <a-entity id="hubble" position="-5 0 -5">
                <a-box id="hubble-pedestal-base" position="0 0.5 0" width="1.2" height="1" depth="1.2" color="#34495e"
                    roughness="0.4" rotation="0 -45 0" material="emissive: #1a252f; emissiveIntensity: 0.2"></a-box>
                <a-box id="hubble-pedestal-mid" position="0 1.05 0" width="1.25" height="0.1" depth="1.25"
                    color="#2c3e50" roughness="0.3" rotation="0 -45 0"
                    material="emissive: #1e2a36; emissiveIntensity: 0.3"></a-box>
                <a-box id="hubble-pedestal-top" position="0 1.2 0" width="1" height="0.15" depth="1" color="#5d6d7e"
                    roughness="0.2" metalness="0.5" rotation="0 -45 0"
                    material="emissive: #3d4d5e; emissiveIntensity: 0.4"></a-box>
                <!-- Luz no pedestal -->
                <a-light type="point" intensity="0.3" position="0 1.3 0" color="#7ec0ee" distance="2"></a-light>

                <a-entity id="hubble-model-entity" gltf-model="#hubble-model" position="0 2 0"
                    scale="0.0003 0.0003 0.0003" class="clickable exhibit-model" data-exhibit-id="hubble"
                    data-triggerable-button="1" cursor-hover
                    animation="property: rotation; to: 0 360 0; loop: true; dur: 10000; easing: linear"></a-entity>

                <a-entity id="hubble-label-container" position="0.425 0.2 0.450" rotation="0 45 0">
                    <a-plane id="hubble-label-bg" position="0 0 0" width="1" height="0.3" color="#ecf0f1"
                        roughness="0.4"></a-plane>
                    <a-text id="hubble-label-text" value=" Hubble" position="0 0 0" align="center" anchor="center"
                        font="roboto" color="#2c3e50"></a-text>
                </a-entity>

                <a-entity id="hubble-hotspot-container" position="0.434 0.7 0.434">
                    <a-image id="hubble-hotspot-icon" src="#hotspot-img" class="clickable" data-triggerable-button="1"
                        billboard="" scale="0.5 0.5 0.5" material="" geometry="" rotation="0 45 0"
                        cursor-hover></a-image>
                    <a-entity id="infoPanelContainer1"></a-entity>
                </a-entity>

            </a-entity>

            <!-- JWST -->
            <a-entity id="jwst" position="0 0 -6">
                <a-box id="jwst-pedestal-base" position="0 0.5 0" width="1.2" height="1" depth="1.2" color="#34495e"
                    roughness="0.4" material="emissive: #1a252f; emissiveIntensity: 0.2"></a-box>
                <a-box id="jwst-pedestal-mid" position="0 1.05 0" width="1.25" height="0.1" depth="1.25" color="#2c3e50"
                    roughness="0.3" material="emissive: #1e2a36; emissiveIntensity: 0.3"></a-box>
                <a-box id="jwst-pedestal-top" position="0 1.2 0" width="1" height="0.15" depth="1" color="#5d6d7e"
                    roughness="0.2" metalness="0.5" material="emissive: #3d4d5e; emissiveIntensity: 0.4"></a-box>
                <!-- Luz no pedestal -->
                <a-light type="point" intensity="0.3" position="0 1.3 0" color="#ffa500" distance="2"></a-light>
                <a-entity id="jwst-model-entity" gltf-model="#jwst-model" position="0 2 0" scale="0.05 0.05 0.05"
                    class="clickable exhibit-model" data-exhibit-id="jwst" data-triggerable-button="3" cursor-hover
                    animation="property: rotation; to: 0 360 0; loop: true; dur: 10000; easing: linear"></a-entity>

                <a-plane id="jwst-label-bg" position="0 0.2 0.61" width="1" height="0.3" color="#ecf0f1"
                    roughness="0.4"></a-plane>
                <a-text id="jwst-label-text" value="JWST" position="0 0.2 0.61" align="center" anchor="center"
                    color="#2c3e50"></a-text>

                <a-entity id="jwst-hotspot-container" position="0 0.7 0.620">
                    <a-image id="jwst-hotspot-icon" src="#hotspot-img" class="clickable" data-triggerable-button="3"
                        billboard scale="0.5 0.5 0.5" cursor-hover></a-image>
                    <a-entity id="infoPanelContainer3" position="2 0 0" rotation="0 -30 0"></a-entity>
                </a-entity>
            </a-entity>

            <!-- Saturn V -->
            <a-entity id="saturnv" position="5 0 -5">
                <a-box id="saturnv-pedestal-base" position="0 0.5 0" width="1.2" height="1" depth="1.2" color="#34495e"
                    roughness="0.4" rotation="0 45 0" material="emissive: #1a252f; emissiveIntensity: 0.2"></a-box>
                <a-box id="saturnv-pedestal-mid" position="0 1.05 0" width="1.25" height="0.1" depth="1.25"
                    color="#2c3e50" roughness="0.3" rotation="0 45 0"
                    material="emissive: #1e2a36; emissiveIntensity: 0.3"></a-box>
                <a-box id="saturnv-pedestal-top" position="0 1.2 0" width="1" height="0.15" depth="1" color="#5d6d7e"
                    roughness="0.2" metalness="0.5" rotation="0 45 0"
                    material="emissive: #3d4d5e; emissiveIntensity: 0.4"></a-box>
                <!-- Luz no pedestal -->
                <a-light type="point" intensity="0.3" position="0 1.3 0" color="#90ee90" distance="2"></a-light>
                <a-entity id="saturnv-model-entity" gltf-model="#saturnv-model" position="0 2 0" scale="0.2 0.2 0.2"
                    class="clickable exhibit-model" data-exhibit-id="saturnv" data-triggerable-button="4" cursor-hover
                    animation="property: rotation; to: 0 360 0; loop: true; dur: 10000; easing: linear"></a-entity>

                <a-entity id="saturnv-label-container" rotation="0 -45 0">
                    <a-plane id="saturnv-label-bg" position="0 0.2 0.61" width="1" height="0.3" color="#ecf0f1"
                        roughness="0.4"></a-plane>
                    <a-text id="saturnv-label-text" value="üöÄ Saturn V" position="0 0.2 0.61" align="center"
                        anchor="center" color="#2c3e50"></a-text>
                </a-entity>

                <a-entity id="saturnv-hotspot-container" position="-0.46386 0.7 0.46404" rotation="0 -45 0">
                    <a-image id="saturnv-hotspot-icon" src="#hotspot-img" class="clickable" data-triggerable-button="4"
                        billboard="" scale="0.5 0.5 0.5" material="" geometry="" visible="" emissive="color:white"
                        cursor-hover></a-image>
                    <a-entity id="infoPanelContainer4" position="2 1 0" rotation="0 30 0"></a-entity>
                </a-entity>
            </a-entity>

            <!-- ISS -->
            <a-entity id="iss" position="-5 0 0">
                <a-box id="iss-pedestal-base" position="0 0.5 0" width="1.2" height="1" depth="1.2" color="#34495e"
                    roughness="0.4" material="emissive: #1a252f; emissiveIntensity: 0.2"></a-box>
                <a-box id="iss-pedestal-mid" position="0 1.05 0" width="1.25" height="0.1" depth="1.25" color="#2c3e50"
                    roughness="0.3" material="emissive: #1e2a36; emissiveIntensity: 0.3"></a-box>
                <a-box id="iss-pedestal-top" position="0 1.2 0" width="1" height="0.15" depth="1" color="#5d6d7e"
                    roughness="0.2" metalness="0.5" material="emissive: #3d4d5e; emissiveIntensity: 0.4"></a-box>
                <!-- Luz no pedestal -->
                <a-light type="point" intensity="0.3" position="0 1.3 0" color="#ff6347" distance="2"></a-light>
                <a-entity id="iss-model-entity" gltf-model="#iss-model" position="0 2 0" scale="0.1 0.1 0.1"
                    class="clickable exhibit-model" data-exhibit-id="iss" data-triggerable-button="5" cursor-hover
                    animation="property: rotation; to: 0 360 0; loop: true; dur: 10000; easing: linear"></a-entity>

                <a-plane id="iss-label-bg" position="0.61 0.2 0" width="1" height="0.3" color="#ecf0f1" roughness="0.4"
                    rotation="0 90 0"></a-plane>
                <a-text id="iss-label-text" value="üåç ISS" position="0.61 0.2 0" align="center" anchor="center"
                    color="#2c3e50" rotation="0 90 0"></a-text>

                <a-entity id="iss-hotspot-container" position="0.605 0.7 0.030" rotation="0 90 0">
                    <a-image id="iss-hotspot-icon" src="#hotspot-img" class="clickable" data-triggerable-button="5"
                        cursor-hover billboard scale="0.5 0.5 0.5"></a-image>
                    <a-entity id="infoPanelContainer5" position="-2 0 0" rotation="0 30 0"></a-entity>
                </a-entity>
            </a-entity>

            <!-- Voyager -->
            <a-entity id="voyager" position="5 0 0">
                <a-box id="voyager-pedestal-base" position="0 0.5 0" width="1.2" height="1" depth="1.2" color="#34495e"
                    roughness="0.4" material="emissive: #1a252f; emissiveIntensity: 0.2"></a-box>
                <a-box id="voyager-pedestal-mid" position="0 1.05 0" width="1.25" height="0.1" depth="1.25"
                    color="#2c3e50" roughness="0.3" material="emissive: #1e2a36; emissiveIntensity: 0.3"></a-box>
                <a-box id="voyager-pedestal-top" position="0 1.2 0" width="1" height="0.15" depth="1" color="#5d6d7e"
                    roughness="0.2" metalness="0.5" material="emissive: #3d4d5e; emissiveIntensity: 0.4"></a-box>
                <!-- Luz no pedestal -->
                <a-light type="point" intensity="0.3" position="0 1.3 0" color="#da70d6" distance="2"></a-light>
                <a-entity id="voyager-model-entity" gltf-model="#voyager-model" position="0 2 0" scale="0.15 0.15 0.15"
                    class="clickable exhibit-model" data-exhibit-id="voyager" data-triggerable-button="2"
                    rotation="0 0 45" cursor-hover
                    animation="property: rotation; to: 0 360 45; loop: true; dur: 10000; easing: linear"></a-entity>

                <a-plane id="voyager-label-bg" position="-0.61 0.2 0" width="1" height="0.3" color="#ecf0f1"
                    roughness="0.4" rotation="0 -90 0"></a-plane>
                <a-text id="voyager-label-text" value="üõ∞Ô∏è Voyager" position="-0.61 0.2 0" align="center"
                    anchor="center" color="#2c3e50" rotation="0 -90 0"></a-text>

                <a-entity id="voyager-hotspot-container" position="-0.610 0.7 0.030" rotation="0 -90 0">
                    <a-image id="voyager-hotspot-icon" src="#hotspot-img" class="clickable" data-triggerable-button="2"
                        cursor-hover billboard scale="0.5 0.5 0.5"></a-image>
                    <a-entity id="infoPanelContainer2" position="2 0 0" rotation="0 -30 0"></a-entity>
                </a-entity>

            </a-entity>
        </a-entity>





        <a-entity position="0 1.6 9.7">

            <!-- An√©is orbitantes ao redor do portal - Buraco Negro -->
            <!-- Anel externo - disco de acre√ß√£o -->
            <a-torus color="#E0E0E0" radius="1.3" radius-tubular="0.02"
                material="emissive: #FFFFFF; emissiveIntensity: 0.4; opacity: 0.6; transparent: true"
                animation="property: rotation; to: 0 0 360; loop: true; dur: 4000; easing: linear">
            </a-torus>

            <!-- Anel interno escuro -->
            <a-torus color="#424242" radius="1.1" radius-tubular="0.015"
                material="emissive: #616161; emissiveIntensity: 0.3; opacity: 0.7; transparent: true"
                animation="property: rotation; to: 0 0 -360; loop: true; dur: 3000; easing: linear">
            </a-torus>

            <!-- Part√≠culas/esferas pequenas orbitando -->
            <a-entity rotation="0 0 0"
                animation="property: rotation; to: 0 0 360; loop: true; dur: 5000; easing: linear">
                <a-sphere color="#E0E0E0" radius="0.035" position="1.2 0 0"
                    material="emissive: #FFFFFF; emissiveIntensity: 0.6; opacity: 0.8; transparent: true"></a-sphere>
                <a-sphere color="#9E9E9E" radius="0.035" position="-1.2 0 0"
                    material="emissive: #BDBDBD; emissiveIntensity: 0.5; opacity: 0.8; transparent: true"></a-sphere>
            </a-entity>

            <!-- Brilho/glow principal ao redor do portal -->
            <a-ring color="#E0E0E0" radius-inner="0.98" radius-outer="1.05"
                material="emissive: #FFFFFF; emissiveIntensity: 0.4; opacity: 0.3; transparent: true; side: double"
                animation="property: material.emissiveIntensity; from: 0.3; to: 0.7; loop: true; dur: 1500; dir: alternate; easing: easeInOutSine">
            </a-ring>

            <!-- Luz pontual do portal -->
            <a-light type="point" intensity="1" color="#E0E0E0" distance="3" position="0 0 0.2"
                animation="property: intensity; from: 0.8; to: 1.5; loop: true; dur: 1500; dir: alternate; easing: easeInOutSine">
            </a-light>

            <a-circle radius="1" class="clickable" segments="64" vr-link="href: index.html" cursor-hover
                material="shader: portal; pano: #skyTexture; side: double">
            </a-circle>

            <!-- Placa de informa√ß√£o estilizada -->
            <a-entity position="-3 0 -0.05" rotation="0 180 0">
                <a-plane color="#1a1a1a" width="3" height="0.4"
                    material="opacity: 0.9; emissive: #2a2a2a; emissiveIntensity: 0.3"
                    animation="property: material.emissiveIntensity; from: 0.2; to: 0.4; loop: true; dur: 2000; dir: alternate; easing: easeInOutSine">
                </a-plane>
                <!-- Borda da placa -->

                <a-text value=" <- Voltar p/ Tela Inicial" align="right" position="0 0 0.01" width="3" color="#FFFFFF"
                    font="roboto">
                </a-text>
            </a-entity>

        </a-entity>



    </a-scene>

    <script>
        // L√≥gica de funcionamento dos Hotspots
        window.onload = function () {

            const buttons = document.querySelectorAll("[data-triggerable-button]");

            buttons.forEach((btn) => {
                let fuseTimeout = null;

                const openPanel = function (event) {
                    // Cancela qualquer fuse pendente
                    if (fuseTimeout) {
                        clearTimeout(fuseTimeout);
                        fuseTimeout = null;
                    }

                    const id = btn.getAttribute("data-triggerable-button");
                    const template = document.querySelector(`#infoPanel${id}`);

                    // Busca o container pelo ID correto (funciona tanto para hotspot quanto modelo)
                    const container = document.querySelector(`#infoPanelContainer${id}`);

                    if (!container) {
                        console.error(`Container #infoPanelContainer${id} n√£o encontrado`);
                        return;
                    }

                    hideAllInfoPanels();

                    const clone = document.importNode(template.content, true);
                    container.appendChild(clone);

                    // Esconde o hotspot (√≠cone I) se existir
                    const hotspotIcon = container.previousElementSibling;
                    if (hotspotIcon && hotspotIcon.hasAttribute('src')) {
                        hotspotIcon.setAttribute("visible", false);
                    }

                    setTimeout(() => {
                        const closeBtn = container.querySelector("#close-btn");
                        if (closeBtn) {
                            closeBtn.addEventListener("click", (e) => {
                                e.stopPropagation();
                                hideAllInfoPanels();
                            });
                        }

                        // Bot√£o para ir √† cena 2 (Galeria)
                        const viewBtn = container.querySelector("[id^='view-']");
                        if (viewBtn) {
                            viewBtn.addEventListener("click", (e) => {
                                e.stopPropagation();
                                const modelType = viewBtn.id.replace('view-', '').replace('-btn', '');
                                navegarParaCena2(modelType);
                            });
                        }
                    }, 100);
                };

                // Evento de clique direto (prioridade)
                btn.addEventListener("click", openPanel);

                // Evento de fusing (para VR/cursor)
                btn.addEventListener("fusing", (e) => {
                    // Cancela fuse anterior se existir
                    if (fuseTimeout) {
                        clearTimeout(fuseTimeout);
                    }
                    // Inicia novo fuse com 2 segundos
                    fuseTimeout = setTimeout(() => {
                        openPanel(e);
                    }, 2000);
                });

                // Cancela o fuse se sair do elemento
                btn.addEventListener("mouseleave", () => {
                    if (fuseTimeout) {
                        clearTimeout(fuseTimeout);
                        fuseTimeout = null;
                    }
                });
            });
        };

        function navegarParaCena2(modelType) {
            // Armazena a informa√ß√£o no sessionStorage
            sessionStorage.setItem('modeloExibicao', modelType);

            // Aplica fade out
            document.body.style.opacity = '0';

            setTimeout(() => {
                window.location.href = 'scene02.html';
            }, 500);
        }

        AFRAME.registerComponent('mobile-look-controls', {
            schema: {
                sensitivity: { default: 0.3 }
            },

            init: function () {
                // Desabilita pointer lock no desktop
                const isMobile = AFRAME.utils.device.isMobile();

                // Configura look-controls baseado no dispositivo
                const lookControls = this.el.components['look-controls'];
                if (lookControls) {
                    if (isMobile) {
                        // Mobile: desabilita look-controls padr√£o
                        lookControls.pause();
                    } else {
                        // Desktop: configura look-controls sem pointer lock
                        this.el.setAttribute('look-controls', {
                            pointerLockEnabled: false,
                            reverseMouseDrag: false,
                            touchEnabled: false
                        });
                        return; // N√£o inicializa controles mobile
                    }
                }

                // Resto do c√≥digo s√≥ executa no mobile
                this.onTouchStart = this.onTouchStart.bind(this);
                this.onTouchMove = this.onTouchMove.bind(this);
                this.onTouchEnd = this.onTouchEnd.bind(this);

                this.touchStartX = 0;
                this.touchStartY = 0;
                this.isTouch = false;

                this.el.sceneEl.addEventListener('enter-vr', () => {
                    if (lookControls) lookControls.pause();
                });

                window.addEventListener('touchstart', this.onTouchStart, { passive: false });
                window.addEventListener('touchmove', this.onTouchMove, { passive: false });
                window.addEventListener('touchend', this.onTouchEnd, { passive: false });
            },

            onTouchStart: function (evt) {
                if (evt.target.id === 'np' ||
                    evt.target.closest('#np') ||
                    (evt.target.classList && evt.target.classList.contains('clickable'))) {
                    return;
                }

                this.isTouch = true;
                this.touchStartX = evt.touches[0].clientX;
                this.touchStartY = evt.touches[0].clientY;
            },

            onTouchMove: function (evt) {
                if (!this.isTouch) return;

                evt.preventDefault();

                const deltaX = evt.touches[0].clientX - this.touchStartX;
                const deltaY = evt.touches[0].clientY - this.touchStartY;

                const rotation = this.el.getAttribute('rotation');

                rotation.y -= deltaX * this.data.sensitivity;
                rotation.x -= deltaY * this.data.sensitivity;
                rotation.x = Math.max(-85, Math.min(85, rotation.x));

                this.el.setAttribute('rotation', rotation);

                this.touchStartX = evt.touches[0].clientX;
                this.touchStartY = evt.touches[0].clientY;
            },

            onTouchEnd: function (evt) {
                this.isTouch = false;
            },

            remove: function () {
                if (AFRAME.utils.device.isMobile()) {
                    window.removeEventListener('touchstart', this.onTouchStart);
                    window.removeEventListener('touchmove', this.onTouchMove);
                    window.removeEventListener('touchend', this.onTouchEnd);
                }
            }
        });

    </script>

    <!-- Joystick Virtual -->
    <div id="mobile-joystick">
        <div id="joystick-inner"></div>
    </div>
</body>

</html>